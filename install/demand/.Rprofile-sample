# This profile should be located in the same folder as "VisionEval"

# Package cleanup (reduce a library to just Base R packages)
# ip <- installed.packages()
# pkgs.to.remove <- ip[!(ip[,"Priority"] %in% c("base", "recommended")), 1]
# lib.to.remove.from <- .libPaths()[2] # often works as the personal library is listed first
# remove.pkgs(pkgs.to.remove,lib.to.remove.from)

# Locate the library of VisionEval packages
ve.root <- "c:\\Users\\jeremy.DESKTOP-OLMEAON\\Documents\\Git-Repos\\VisionEval-JR"
local.lib <- file.path(ve.root,"install","demand","tmp")
if ( ! file_test("-d",local.lib) ) dir.create(local.lib)

# Construct the repository path (will change for actual installer/installation)
VE.repos <- file.path("file://", normalizePath("../built/miniCRAN",winslash="/"))

# The following needs work to handle all kinds of libraries
# In particular, we want the system library (only) plus the new "tmp" so we can
# put all the dependencies into "tmp".  Could use packrat (or borrowed mechanism)
# to accomplish that.

VE.pkgs <-
c(	 "visioneval"
	,"VE2001NHTS"
	,"VESyntheticFirms"
	,"VESimHouseholds"
	,"VELandUse"
	,"VETransportSupply"
	,"VETransportSupplyUse"
	,"VEHouseholdTravel"
	,"VEHouseholdVehicles"
	,"VEPowertrainsAndFuels"
	,"VETravelPerformance"
	,"VEReports"
)
install.packages(
	VE.pkgs,
	lib=local.lib,
	repos=VE.repos,
	dependencies=TRUE)

# Works like a charm, however:
#   Wants to build stringi from source, which entails actual C++ compilation! What's up with that?
#	Obviously, that won't work for an end-user who probably won't have RTools installed.